Object Storage vÃ  MinIO.
NÃ³i vá» Object Storage thÃ¬ sáº½ nghÄ© ngay tá»›i AWS S3. ÄÃ¢y lÃ  má»™t dá»‹ch vá»¥ lÆ°u trá»¯ file dáº¡ng Object cá»§a AWS vÃ  cÅ©ng lÃ  má»™t giao thá»©c truyá»n file dá»±a trÃªn HTTP gá»i lÃ  S3, thá»±c cháº¥t nÃ³ váº«n lÃ  HTTP nhÆ°ng payload vÃ  API truyá»n Ä‘i chá»©a Ä‘á»‹nh dáº¡ng cá»§a S3 API. Dá»±a vÃ o sá»± phÃ¡t triá»ƒn cá»§a HTTP thÃ¬ S3 ra Ä‘á»i vá»›i má»¥c Ä‘Ã­ch lÃ  file transfer. Tuy nhiÃªn cÃ¡c thá»ƒ loáº¡i truyá»n thá»‘ng nhÆ° FTP, SFTP hay NFS váº«n Ä‘ang phá»• biáº¿n hÆ¡n vÃ¬ chÃºng cÃ³ kháº£ nÄƒng Files Browser Traversal vÃ  File Permission. CÃ¡c giao thá»©c nÃ y dá»±a vÃ o cÆ¡ cháº¿ "share" Ä‘á»ƒ cÃ¡c instance gáº¯n vá»›i bá»™ lÆ°u trá»¯ cÃ³ thá»ƒ cÃ¹ng nhÃ¬n tháº¥y nhau, vá» hiá»‡u suáº¥t vÃ  tÃ­nh kháº£ dá»¥ng thÃ¬ giá»‘ng vá»›i mÃ´ hÃ¬nh File vÃ  Server truyá»n thá»‘ng, Ä‘á»ƒ ghi file xuá»‘ng vÃ  load file thÃ¬ chá»‰ cáº§n FileUpload, ReadFile, WriteFile lÃ  Ä‘Æ°á»£c. Tuy nhiÃªn drawback lá»›n nháº¥t cá»§a nÃ³ Ä‘Ã³ lÃ :
TÃ­nh á»•n Ä‘á»‹nh, quÃ¡ nhiá»u server hoáº·c instance mount vÃ  truy cáº­p vÃ o cÃ¹ng thay Ä‘á»•i dá»¯ liá»‡u hoáº·c tháº­m chÃ­ override quyá»n cÃ³ thá»ƒ dáº«n tá»›i cÃ¡c server khÃ¡c khÃ´ng truy cáº­p Ä‘Æ°á»£c.
KhÃ´ng thá»ƒ scale out Ä‘Æ°á»£c, vá» báº£n cháº¥t thÃ¬ NFS hay FTP lÃ  má»™t Storage Pool, nÃ³i lÃ  Pool nhÆ°ng thá»±c cháº¥t nÃ³ chá»‰ lÃ  má»™t con Server Ä‘Æ°á»£c quáº£n trá»‹ á»Ÿ dÆ°á»›i vÃ  gáº¯n vÃ o má»™t cÃ¡i Disk lá»›n, Server Ä‘Ã³ bá»‹ lÃ m sao thÃ¬ táº¥t cáº£ dá»«ng háº¿t. Tháº­m chÃ­ khÃ³ setup Master-slave hoáº·c HA hay replicate dá»± phÃ²ng.
Äa pháº§n Ä‘á»u set permission = root hoáº·c theo má»™t user id mÃ  yÃªu cáº§u táº¥t cáº£ cÃ¡c server pháº£i cÃ³ cÃ¹ng User ID Ä‘Ã³. Risk vá» Security hÆ¡i cao vÃ  khÃ³ sá»­a Ä‘á»•i.
Rá»§i ro dá»¯ liá»‡u khÃ¡ lá»›n, vÃ¬ lÃ  "share" nÃªn khi má»™t app á»Ÿ má»™t server nÃ o Ä‘Ã³ xÃ³a file thÃ¬ cÃ¡c server khÃ¡c cÃ¹ng mount vÃ o cÅ©ng sáº½ bá»‹ máº¥t file theo.
Hiá»‡u suáº¥t khÃ´ng cao vÃ¬ toÃ n bá»™ server phá»¥ thuá»™c vÃ o network má»™t chiá»u tá»›i NFS server vÃ  cÃ¹ng thao tÃ¡c dá»¯ liá»‡u má»™t lÃºc.
Kubernetes váº«n phÃ¡t triá»ƒn cÃ¡c Storage Class vÃ  CSI há»— trá»£ viá»‡c sá»­ dá»¥ng NFS, cÃ¡c Node (server) sáº½ cÃ¹ng chá»c vÃ o NFS Server nÃ y, ChÃºng ta cÃ³ thá»ƒ tÆ° duy theo kiá»ƒu truyá»n thá»‘ng vÃ  táº­n dá»¥ng NFS Server vÃ¬ nÃ³ lÃ  cÃ¡ch nhanh nháº¥t, tá»‘i Æ°u vÃ  Ä‘Æ¡n giáº£n nháº¥t, Æ°u Ä‘iá»ƒm cá»§a NFS váº«n lÃ  "share" vÃ  lÃ  Network FileSystem nÃªn cÃ¡c Pod vÃ  á»©ng dá»¥ng cá»§a Kubernetes cÃ³ thá»ƒ dÃ¹ng NFS cho má»i loáº¡i storage trÃªn Pod, Pod dáº¡ng StatefulSet nhÆ° Database, Deployment sá»­ dá»¥ng Storage Ä‘á»ƒ lÆ°u Media file, Æ°u Ä‘iá»ƒm lá»›n nháº¥t cá»§a nÃ³ váº«n lÃ  "tiá»‡n" vÃ  dá»… dÃ¹ng vÃ¬ báº£n cháº¥t lÃ  FileSystem.
Láº¡i quay láº¡i váº¥n Ä‘á» vá» hiá»‡u suáº¥t vÃ  Ä‘Æ¡n node khi phá»¥ thuá»™c vÃ o NFS Server. Váº­y náº¿u khÃ´ng sá»­ dá»¥ng NFS Server lÃ m Storage Pool thÃ¬ chÃºng ta sá»­ dá»¥ng cÃ¡i gÃ¬ Ä‘Ã¢y ? Khi á»Ÿ trÃªn Cloud, cÃ¡c Node khÃ¡c AZ hay tháº­m chÃ­ cÃ¹ng AZ cÅ©ng khÃ´ng thoÃ¡t Ä‘Æ°á»£c Ä‘iá»u nÃ y, náº¿u muá»‘n storage pool chung cho cÃ¡c Node vÃ  chia Ä‘á»u ra cÃ¡c AZ thÃ¬ váº«n pháº£i dÃ¹ng EFS vá»›i base lÃ  NFS protocol, cÃ¡c server cÃ¹ng AZ cÅ©ng khÃ´ng thá»ƒ nÃ o dÃ¹ng chung má»™t EBS Storage vÃ  cÅ©ng khÃ´ng cÃ³ cÆ¡ cháº¿ hay filesystem cho EBS Ä‘á»ƒ dÃ¹ng chung dá»¯ liá»‡u nhÆ° kiá»ƒu VMFS cá»§a VMware Ä‘Æ°á»£c. EFS trÃªn Cloud tháº­m chÃ­ váº«n tá»“n táº¡i vÃ  Ä‘Æ°á»£c sá»­ dá»¥ng nhiá»u. Tuy nhiÃªn náº¿u muá»‘n thoÃ¡t ra Ä‘Æ°á»£c NFS, chÃºng ta sáº½ pháº£i tÃ¬m má»™t giáº£i phÃ¡p mÃ  Cloud Native hay BigData Ä‘ang hÆ°á»›ng tá»›i Ä‘Ã³ lÃ  "lÆ°u trá»¯ phÃ¢n tÃ¡n dá»¯ liá»‡u".
PhÃ¢n tÃ¡n dá»¯ liá»‡u cÆ¡ báº£n nháº¥t Ä‘Ã³ lÃ  RAID, theo mÃ¬nh nÃ³ lÃ  nguyÃªn thá»§y nháº¥t nhÆ°ng thá»±c táº¿ thuáº­t toÃ¡n cá»§a RAID Ä‘Æ¡n giáº£n chá»‰ lÃ  Bit Operator, dá»±a vÃ o phÃ©p XOR, nhÆ° kiá»ƒu A vÃ  B sáº½ XOR vá»›i nhau vÃ  sinh ra káº¿t quáº£ lÆ°u trá»¯ vÃ  Ä‘Æ°a vÃ o C, C sáº½ cáº§m "máº£nh" nÃ y cá»§a A vÃ  B. RAID phá»¥ thuá»™c vÃ o pháº§n cá»©ng khÃ¡ nhiá»u vÃ  quan trá»ng nháº¥t Ä‘Ã³ lÃ  nÃ³ khÃ´ng thá»ƒ má»Ÿ rá»™ng hoáº·c thay Ä‘á»•i lÃªn RAID cao hÆ¡n, nÃ³ cÃ³ thá»ƒ phÃ¢n tÃ¡n dá»¯ liá»‡u cÃ¡c Disk nhÆ°ng nÃ³ láº¡i khÃ´ng pháº£i phÃ¢n tÃ¡n thá»±c sá»± vÃ¬ pháº¡m vi cá»§a nÃ³ chá»‰ loanh quanh á»Ÿ trong má»™t server vÃ  phá»¥ thuá»™c vÃ o card RAID controller trÃªn server Ä‘Ã³, chÃºng tháº­m chÃ­ cÃ²n bá»‹ phá»¥ thuá»™c vÃ o card raid Ä‘Ã³ vÃ¬ nÃ³ mÃ  cháº¿t thÃ¬ dá»¯ liá»‡u sáº½ bay sáº¡ch, ká»ƒ cáº£ SAN storage cÅ©ng khÃ´ng trÃ¡nh Ä‘Æ°á»£c váº¥n Ä‘á» nÃ y, tuy nhiÃªn Ã­t nháº¥t nÃ³ váº«n cÃ²n cÃ³ 2 SFF controller Ä‘á»ƒ HA cho nhau, nhÆ°ng váº«n bá»‹ giá»›i háº¡n á»Ÿ má»™t thiáº¿t bá»‹ pháº§n cá»©ng. Má»™t loáº¡i hÃ¬nh phá»• biáº¿n khÃ¡c cá»§a áº£o hÃ³a vÃ  DR (disaster recovery) Ä‘Ã³ lÃ  Stretched Cluster, thá»±c táº¿ nÃ³ lÃ  RAID giá»¯a 2 AZ hoáº·c giá»¯a 2 DC, nÃ³ lÃ  replicate thÃ¬ Ä‘Ãºng hÆ¡n. Tuy nhiÃªn replicate cÅ©ng lÃ  má»™t tÃ­nh nÄƒng trong phÃ¢n tÃ¡n dá»¯ liá»‡u vÃ  náº¿u há»‡ thá»‘ng Ä‘áº¡t Ä‘Æ°á»£c Stretched Cluster thÃ¬ chÃºng cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c coi gáº§n nhÆ° lÃ  "PhÃ¢n tÃ¡n dá»¯ liá»‡u". Náº¿u ai cÃ³ pháº£n biá»‡n vá» Stretched Cluster thÃ¬ cÃ³ thá»ƒ comment thÃªm.
Dá»¯ liá»‡u Ä‘Æ°á»£c cho lÃ  phÃ¢n tÃ¡n khi nÃ³ cÃ³ kháº£ nÄƒng copy má»™t file dá»¯ liá»‡u ra nhiá»u node trÃªn nhiá»u disk khÃ¡c nhau vÃ  cÃ³ thá»ƒ má»Ÿ rá»™ng báº±ng cÃ¡ch thÃªm node hay cháº­m chÃ­ lÃ  xÃ³a node (trong trÆ°á»ng há»£p usable capacity Ä‘á»§ vá»›i sá»‘ node cÃ²n láº¡i). Äáº§u tiÃªn ta pháº£i phÃ¢n loáº¡i Storage thÃ nh 2 loáº¡i cÆ¡ báº£n nháº¥t Ä‘Ã³ lÃ  Block Storage vÃ  Object Storage, Block Storage sáº½ á»Ÿ level tháº¥p hÆ¡n vÃ  váº«n lÃ  cÃ¡c Disk, OSD truyá»n thá»‘ng, tuy nhiÃªn chÃºng sáº½ khÃ´ng Ä‘Æ°á»£c cáº¥u hÃ¬nh RAID mÃ  dá»±a vÃ o Software Storage Ä‘á»ƒ táº¡o cÃ¡c disk thÃ nh má»™t Storage Pool. RAID controller sáº½ Ä‘Æ°á»£c bá» Ä‘i vÃ  metadata + block data sáº½ Ä‘Æ°á»£c Software Storage quyáº¿t Ä‘á»‹nh lÆ°u vÃ  sá»­ dá»¥ng thuáº­t toÃ¡n Ä‘á»ƒ map chÃºng láº¡i vá»›i nhau vÃ  replicate hoáº·c copy chÃºng há»£p lÃ½ tá»›i cÃ¡c Node. NhÆ° váº­y chÃºng hoáº¡t Ä‘á»™ng báº±ng cÃ¡ch má»—i node Ä‘á»u pháº£i cÃ³ má»™t daemon run vÃ  tÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c node khÃ¡c Ä‘á»ƒ cáº¥u thÃ nh má»™t cá»¥m, hai á»©ng cá»­ viÃªn ná»•i báº­t nháº¥t hiá»‡n nay Ä‘Ã³ lÃ  Ceph cá»§a Redhat vÃ  VMware vSAN. ChÃºng táº¡o ra dá»¯ liá»‡u phÃ¢n tÃ¡n dáº¡ng Block Storage giá»¯a cÃ¡c Node, nhÆ°ng váº«n bá»‹ má»™t giá»›i háº¡n Ä‘Ã³ lÃ  chá»‰ cháº¡y Ä‘Æ°á»£c cÃ¡c Node cÃ¹ng AZ/DC, vÃ¬ drawback lá»›n nháº¥t cá»§a chÃºng Ä‘Ã³ lÃ  tÃ­nh Ä‘á»“ng bá»™ vÃ  time offset, Ä‘áº§u tiÃªn lÃ  pháº£i cÃ³ Disk cache hoáº·c (bluestore) Ä‘á»ƒ cache data trÆ°á»›c khi replicate giÃºp dá»¯ liá»‡u khi ghi vÃ o lÃ  cÃ³ thá»ƒ ghi tá»©c thá»i luÃ´n vÃ o má»™t Node trÆ°á»›c, sau Ä‘Ã³ nÃ³ má»›i replicate xuá»‘ng cÃ¡c Data Disk sau, thá»© hai lÃ  thá»i gian pháº£i chuáº©n, NTP pháº£i Ä‘Æ°á»£c cáº¥u hÃ¬nh khá»›p giá»¯a cÃ¡c Node, thá»© 3 lÃ  pháº£i Ä‘á»“ng bá»™ vá» tá»‘c Ä‘á»™, cáº¥u hÃ¬nh RAM, CPU, RAM cÅ©ng pháº£i lá»›n Ä‘á»ƒ cache layer 1,2 khi kernel copy tá»« disk cache xuá»‘ng data node.
Äá»ƒ má»Ÿ rá»™ng vÃ  thoÃ¡t khá»i phá»¥ thuá»™c vÃ o má»™t AZ/DC khi triá»ƒn khai Software Storage, ta láº¡i cáº¥u hÃ¬nh Stretched Cluster giá»‘ng nhÆ° VMware vSAN váº­y. Tuy nhiÃªn má»i thá»© lÃºc nÃ y trá»Ÿ lÃªn quÃ¡ phá»©c táº¡p vÃ  quÃ¡ nhiá»u ká»¹ thuáº­t, Ä‘áº·c biá»‡t lÃ  quÃ¡ sÃ¢u vá» pháº§n cá»©ng khi triá»ƒn khai cÃ¡c giáº£i phÃ¡p lÆ°u trá»¯ phÃ¢n tÃ¡n á»Ÿ dáº¡ng Block Storage.
Block Storage hiá»‡u quáº£ cho viá»‡c Pod hay VM dÃ¹ng chung vÃ  migrate dá»… dÃ ng giá»¯a cÃ¡c Node vÃ  chung dá»¯ liá»‡u, khi triá»ƒn khai Database thÃ¬ dá»±a vÃ o Block Software Storage nhÆ° Ceph hay vSAN, chÃºng ta cÃ³ thá»ƒ triá»ƒn khai mÃ´ hÃ¬nh gá»i lÃ  HCI (hypercovered) . NhÆ°ng viá»‡c má»Ÿ rá»™ng vÃ  HA sang DC hay AZ khÃ¡c hÆ¡i khÃ³ khÄƒn, vÃ¬ váº­y cÃ¡c Database nhÆ° PostgreSQL hay db MySQL cÃ³ xu hÆ°á»›ng háº¡n cháº¿ viá»‡c nÃ y vÃ  thiáº¿t káº¿ database theo hÆ°á»›ng Multi-master dáº¡ng replicate nhÆ° PostgreSQL repmgr, EnterpriseDB (PostgreSQL báº£n tráº£ phÃ­) hoáº·c Sharding dá»¯ liá»‡u nhÆ° Vitess giá»‘ng Youtube hoáº·c Github, lÃºc nÃ y thÃ¬ cháº³ng cáº§n lo vá» viá»‡c pháº£i cÃ³ storage pool ná»¯a vÃ  chÃºng sáº½ tá»± xá»­ lÃ½ xá»­ liá»‡u á»Ÿ má»©c Application vá»›i nhau mÃ  khÃ´ng cÃ²n phá»¥ thuá»™c vÃ o Storage á»Ÿ Infrastructure.
Xu hÆ°á»›ng Ä‘ang dáº§n nÃ¢ng cao vÃ  chÃº trá»ng hÆ¡n vÃ o Application khi sá»­ dá»¥ng Softwara Storage má»©c OS Ä‘á»ƒ cáº¥u thÃ nh Storage Pool vÃ  khÃ´ng cáº§n phá»¥ thuá»™c vÃ o pháº§n cá»©ng, tiáº¿p Ä‘Ã³ lÃ  sá»­ dá»¥ng chÃ­nh Application Ä‘á»ƒ tá»± phÃ¢n tÃ¡n vÃ  scale dá»¯ liá»‡u mÃ  cáº§n quan tÃ¢m storage hay OS hoáº·c FileSystem cá»§a nÃ³ lÃ  gÃ¬ ? ÄÃ¢y má»›i thá»±c sá»± lÃ  á»©ng dá»¥ng cÃ³ thá»ƒ Cloud hÃ³a vÃ  Native trÃªn má»i ná»n táº£ng, chÃºng khÃ´ng quan tÃ¢m OS lÃ  gÃ¬ ? pháº§n cá»©ng lÃ  gÃ¬, tá»± chÃºng cÃ³ thá»ƒ cluster vá»›i nhá»¯ng node khÃ¡c, dá»¯ liá»‡u tá»« Application khÃ¡ nhá» vÃ  khÃ´ng chung cháº¡n vá»›i cÃ¡c Application khÃ¡c nÃªn chÃºng cÅ©ng khÃ´ng lo vá» viá»‡c bá»‹ váº¥n Ä‘á» vá» Network hay khÃ¡c AZ gÃ¬, má»™t báº£n ghi hoáº·c má»™t file Ä‘Æ°á»£c ghi lÃªn gáº§n nhÆ° theo kiá»ƒu pipeline váº­y. ChÃºng replicate vá»›i nhau cá»±c ká»³ nhanh vÃ¬ chá»‰ dá»¯ liá»‡u replicate nguyÃªn thá»§y lÃ  báº£n ghi trá»±c tiáº¿p á»Ÿ pháº§n App, khÃ´ng cáº§n Ä‘i qua nhiá»u lá»›p Filesystem. Ká»ƒ cáº£ cÃ¡c dáº¡ng db nhÆ° NoSQL cÅ©ng theo cÆ¡ cháº¿ nÃ y. Chung quy lÃ  Application Ä‘Ã£ "tiáº¿n hÃ³a" Ä‘áº¿n má»©c tá»± tá»• chá»©c cÆ¡ cháº¿ phÃ¢n tÃ¡n dá»¯ liá»‡u cá»§a Application Ä‘Ã³ mÃ  khÃ´ng cÃ²n phá»¥ thuá»™c vÃ o Storage dÆ°á»›i Infrastructure ná»¯a.
Vá»›i cÃ¡c dá»¯ liá»‡u dáº¡ng Object Storage thÃ¬ cÃ ng Ä‘Æ¡n giáº£n hÆ¡n khi dá»¯ liá»‡u cá»§a chÃºng lÃ  dáº¡ng static, khÃ´ng bá»‹ thay Ä‘á»•i vÃ  realtime nhiá»u nhÆ° Database, lÆ°u má»™t láº§n duy nháº¥t vÃ  Ä‘á»c nhiá»u láº§n, vá»›i cÃ¡c há»‡ thá»‘ng cáº§n lÆ°u trá»¯ media file thÃ¬ Object Storage lÃ  giáº£i phÃ¡p tá»‘t nháº¥t hiá»‡n nay. NÃ³i vá» S3 thÃ¬ nÃ³ quÃ¡ lÃ  Ä‘Æ¡n giáº£n rá»“i vÃ¬ viá»‡c khá»Ÿi táº¡o dá»‹ch vá»¥ ráº¥t nhanh vÃ  sá»­ dá»¥ng dá»… dÃ ng, khi triá»ƒn khai há»‡ thá»‘ng local hoáº·c on-prem, náº¿u sá»­ dá»¥ng S3 thÃ¬ láº¡i vÆ°á»›ng issue vá» Ä‘Æ°á»ng truyá»n hay chi phÃ­ vÃ  viá»‡c cháº¡y app dÆ°á»›i on-prem mÃ  muá»‘n lÆ°u trá»¯ Object data dáº¡ng phÃ¢n tÃ¡n thÃ¬ sao ?

MinIO lÃ  má»™t á»©ng dá»¥ng siÃªu nháº¹, dá»… cáº¥u hÃ¬nh vÃ  cá»±c ká»³ Ä‘Æ¡n giáº£n. Viá»‡c quan trá»ng chá»‰ lÃ  Ä‘Æ°a ra sá»‘ liá»‡u vÃ  tá»± tÃ­nh toÃ¡n xem cÃ³ bao nhiÃªu node, bao nhiÃªu disk tá»«ng node, disk á»Ÿ Ä‘Ã¢y khÃ´ng pháº£i lÃ  Disk á»Ÿ dÆ°á»›i server mÃ  lÃ  disk mÃ  MinIO tá»± hiá»ƒu, náº¿u triá»ƒn khai Kubernetes thÃ¬ chÃºng ta Ä‘á»u biáº¿t chÃºng cÃ³ PersistentVolume (PV), PV dáº¡ng RWO luÃ´n lÃ  block storage, vá» báº£n cháº¥t lÃ  má»™t EBS (AWS) hoáº·c má»™t Virtual Disk gáº¯n vÃ o Server má»™t cÃ¡ch Dynamic, vÃ  má»™t Disk sáº½ format toÃ n bá»™ thÃ nh má»™t Filesystem trÃªn disk Ä‘Ã³, nhÆ°ng quan trá»ng nháº¥t lÃ  nÃ³ dynamic, má»™t Worker Node cÃ³ 4 pod MinIO thÃ¬ 4 Pod tÆ°Æ¡ng á»©ng vá»›i 4 Disk vÃ  4 disk tá»± format thÃ nh má»™t filesystem cho Pod Ä‘Ã³ sá»­ dá»¥ng. Pod Ä‘i node nÃ o thÃ¬ disk kia theo Ä‘áº¿n Ä‘Ã³, Pod Ä‘Æ°á»£c táº¡o ra hay xÃ³a Ä‘i thÃ¬ disk cÅ©ng theo Ä‘Ã³ mÃ  xÃ³a Ä‘i hay á»Ÿ di trÃº Ä‘áº¿n nÆ¡i tÆ°Æ¡ng á»©ng. Váº­y lÃ  cÃ¡c chÃºng Ä‘Ã£ Dynamic hoÃ n toÃ n, Ä‘áº·c Ä‘iá»ƒm vÃ  lá»£i tháº¿ lá»›n cá»§a phÃ¢n tÃ¡n dá»¯ liá»‡u Ä‘Ã³ lÃ  Dynamic vÃ  khÃ´ng bá»‹ phá»¥ thuá»™c vÃ o viá»‡c server pháº£i cÃ³ tÆ°ng Ä‘Ã¢y node, pháº£i gáº¯n vá»›i disk nÃ o hay pháº£i luÃ´n cá»‘ Ä‘á»‹nh, khÃ´ng thay Ä‘á»•i Ä‘Æ°á»£c. Sau Ä‘Ã³ ta sáº½ "scale" Pod trÃªn cÃ¡c Node vÃ  chÃºng sáº½ Ä‘Æ°á»£c gá»™p thÃ nh má»™t Pool Set vá»›i nhau. ThÃ nh má»™t Object Storage Pool.
Replicate vÃ  Erasure Coding. Khi triá»ƒn khai Object Storage vá»›i MinIO, ta Ä‘Ã£ tá»± chá»§ Ä‘Æ°á»£c pháº§n Node vÃ  Disk nÃªn khÃ´ng cáº§n quan tÃ¢m nÃ³ ná»¯a, muá»‘n bao nhiÃªu thÃ¬ scale báº¥y nhiÃªu. Ta cÃ³ 2 lá»±a chá»n Ä‘á»ƒ triá»ƒn khai, Ä‘Ã³ lÃ  Replicate, khi mÃ  ta sáº½ thiáº¿t káº¿ vá»›i 2 NodeGroup á»Ÿ AZ 1 vÃ  AZ 2, tuy nhiÃªn lÃºc nÃ y, chÃºng ta khÃ´ng cáº§n quan tÃ¢m vá» viá»‡c pháº£i replicate nhÆ° nÃ o cho chuáº©n vÃ¬ MinIO Ä‘Ã£ tá»± lÃ m Ä‘iá»u Ä‘Ã³, nÃ³ chá»‰ cáº§n biáº¿t lÃ  cÃ¡c node vá»›i AZ nÃ y vá»›i sá»‘ disk nhÆ° nÃ y vÃ  á»Ÿ cÃ¡c node á»Ÿ AZ kia vá»›i sá»‘ disk nhÆ° nÃ y lÃ  cÃ³ thá»ƒ tá»± cÃ¢n báº±ng vÃ  tÃ­nh toÃ¡n Ä‘Æ°á»£c dá»±a theo sá»‘ disk/node theo sá»‘ K/M/N. Tá»©c lÃ  ta cÃ³ thá»ƒ máº¥t báº¥t cá»© Node/disk nÃ o trong khoáº£ng cho phÃ©p, mÃ  khÃ´ng cáº§n quan tÃ¢m nÃ³ náº±m á»Ÿ Ä‘Ã¢u. Khi mÃ  dá»¯ liá»‡u cÃ ng lá»›n vÃ  cÃ ng cÃ³ nhiá»u node thÃ¬ triá»ƒn khai Erasure Coding (EC) láº¡i cÃ ng hiá»‡u quáº£ hÆ¡n, vá»›i >= 8 node thÃ¬ EC cÃ³ thá»ƒ tiáº¿t kiá»‡m Ä‘áº¿n 87% vá»›i sá»‘ node cho phÃ©p failover = 2. Lá»£i tháº¿ khi sá»­ dá»¥ng MinIO vá»›i node lá»›n Ä‘Ã³ lÃ  cÃ³ thá»ƒ sá»­ dá»¥ng Erasure Coding Ä‘á»ƒ vá»«a replicate vá»«a failover tá»‘t hÆ¡n mÃ  Ã­t tá»‘n hÆ¡n dung lÆ°á»£ng Ä‘á»ƒ truy trÃ¬ cÃ¡c "máº£nh cá»§a file" hÆ¡n.
Tuy nhiÃªn Ä‘á»ƒ triá»ƒn khai MinIO hiá»‡u quáº£ vÃ  Ä‘áº¡t Ä‘áº¿n cÃ¡i gá»i lÃ  "dá»¯ liá»‡u phÃ¢n tÃ¡n" thÃ¬ háº¡ táº§ng cá»§a chÃºng ta pháº£i lÃ  dáº¡ng "Cloud", Node hay Pod hay Disk cÃ³ thá»ƒ scale Ä‘Æ¡n giáº£n hoáº·c cÃ³ sáºµn Node Ä‘á»ƒ cháº¡y báº¥t cá»© lÃºc nÃ o, nháº¥t lÃ  Persistent Volume pháº£i lÃ  StorageClass vá»›i dynamic volume vÃ  chá»‰ cáº§n Persistent Volume á»Ÿ dáº¡ng RWO lÃ  Ä‘Æ°á»£c, MinIO sáº½ tá»± xá»­ lÃ½ viá»‡c cluster thÃ nh má»™t Object Storage Pool. MinIO cÃ³ thá»ƒ hiá»‡u quáº£ khi káº¿t há»£p Ä‘á»ƒ xÃ¢y dá»±ng thÃ nh giáº£i phÃ¡p lÆ°u trá»¯ dá»¯ liá»‡u tÄ©nh á»Ÿ dÆ°á»›i on-prem vá»›i mÃ´i trÆ°á»ng air-gap, no-internet, nhiá»u server trá»‘ng, strict vá» máº·t data vÃ  internet, viá»‡c cháº¡y vÃ  run nÃ³ ráº¥t Ä‘Æ¡n giáº£n. Äáº·c biá»‡t lÃ  cháº³ng cÃ³ file cáº¥u hÃ¬nh gÃ¬ cáº£, chá»‰ phá»¥ thuá»™c vÃ o file Ä‘á»ƒ start minio-server vÃ  Ä‘iá»n Ä‘Ãºng tham sá»‘ lÃ  sá»‘ node/sá»‘ disk vÃ o lÃ  Ä‘Æ°á»£c. Cáº¥u hÃ¬nh sÃ¢u thÃ¬ cÃ³ giao diá»‡n web hoáº·c command cáº¥u hÃ¬nh dáº¡ng parameter Ä‘Æ¡n giáº£n, key=value vÃ  khÃ´ng cÃ³ nested key value config. NÃ³i chung nÃ³ cá»±c ká»³ Ä‘Æ¡n giáº£n vÃ  chá»‰ cáº§n Ä‘iá»n Ä‘Ãºng vÃ  Ä‘á»§ tham sá»‘ vá» sá»‘ lÆ°á»£ng Quorum vÃ o lÃ  Ä‘Æ°á»£c.
P/S: Em xin phÃ©p thÃªm Ã½ kiáº¿n lÃ  á»Ÿ Ä‘Ã¢y khÃ´ng so sÃ¡nh hay Ä‘Æ°a MinIO lÃªn thÃ nh cÃ¡i tá»‘t nháº¥t hay gÃ¬, chá»‰ Ä‘Æ¡n giáº£n lÃ  náº¿u muá»‘n build object-storage thÃ¬ cÃ³ thá»ƒ sá»­ dá»¥ng MinIO mÃ  khÃ´ng cáº§n dá»±a vÃ o Ceph hoáº·c shared block-storage á»Ÿ dÆ°á»›i, trong háº¡ táº§ng on-prem cÃ³ 2 hoáº·c nhiá»u DC mÃ  muá»‘n triá»ƒn khai Object-Storage, cÃ³ cáº§n thiáº¿t pháº£i build Ceph hay vSAN rá»“i replicate chÃºng báº±ng Streetred Cluster ? MinIO cÃ³ thá»ƒ replicate data giá»¯a cÃ¡c Disk á»Ÿ cÃ¡c Node mÃ  khÃ´ng cáº§n shared block-storage á»Ÿ dÆ°á»›i ná»¯a, chá»‰ thuáº§n riÃªng vá» Object-storage thÃ¬ MinIO Ä‘á»§ Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y.
BÃ i viáº¿t hÆ¡i dÃ i, má»i ngÆ°á»i cÃ¹ng tháº£o luáº­n thÃªm nhÃ© ğŸ˜ƒ